<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      layout:decorator="__parent_base"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      th:with="currentPage = 'samples'">
<head>
    <title th:text="${sample.accession}">SAMEAxxxxx &lt; BioSamples &lt; EMBL-EBI</title>

    <link th:href="@{/stylesheets/relationsVis/vis.min.css}" href="/stylesheets/relationsVis/vis.min.css"  rel="stylesheet" type="text/css"  />
    <link th:href="@{/stylesheets/relationsVis/relationsVis.css}" href="/stylesheets/relationsVis/relationsVis.css"  rel="stylesheet" type="text/css"  />
    <link th:href="@{/stylesheets/relationsVis/awesomplete.css}" href="/stylesheets/relationsVis/awesomplete.css"  rel="stylesheet" type="text/css"  />

</head>
<body>



<main layout:fragment="content">

    <div class="detail_table">
        <h4 th:text="${'Sample ' + sample.accession}">Sample SAMEAxxxxx</h4>

        <table id="bs_results_tablesamplegroupdetail">
            <tbody>
            <!-- Common sample attributes -->
            <tr th:if="${#maps.containsKey(sample.characteristics, 'sample_name') and #arrays.length(sample.characteristics.sample_name) > 0}">
                <td class="col_title"><b>Sample Name : </b></td>
                <td>
                    <div th:each="name: ${sample.characteristicsText.sample_name}">
                        <span th:text="${name}"></span>
                    </div>
                </td>
            </tr>
            <tr th:if="${#maps.containsKey(sample.characteristics, 'sample_title') and #arrays.length(sample.characteristics.sample_title) > 0}">
                <td class="col_title"><b>Sample Title : </b></td>
                <td>
                    <div th:each="title: ${sample.characteristicsText.sample_title}">
                        <span th:text="${title}"></span>
                    </div>
                </td>
            </tr>
            <tr th:if="${#maps.containsKey(sample.characteristics, 'sample_description') and #arrays.length(sample.characteristics.sample_description) > 0}">
                <td class="col_title"><b>Sample Description : </b></td>
                <td>
                    <div th:each="description: ${sample.characteristicsText.sample_description}">
                        <span th:text="${description}"></span>
                    </div>
                </td>
            </tr>

            <!-- Dedicated organism attribute -->
            <tr th:if="${#maps.containsKey(sample.characteristics, 'organism') and #arrays.length(sample.characteristics.organism) > 0}">
                <td class="col_title"><b>Organism : </b></td>
                <td>
                    <div class="characteristic-mapping" th:each="organism: ${sample.characteristics.get('organism')}">
                        <div class="characteristic-mapping-payload" th:text="${organism}">{"foo":"bar"}</div>
                    </div>
                </td>
            </tr>

            <!-- start all characteristics -->
            <tr th:each="characteristic: ${sample.characteristics}" th:unless="${characteristic.key == 'organism' or characteristic.key == 'sample_name'  or characteristic.key == 'sample_title' or characteristic.key == 'sample_description'}">
                <td class="col_title"><b th:utext="${#strings.capitalizeWords(#strings.replace(characteristic.key,'_',' ')) + ' : '}">Characteristic : </b></td>
                <td th:if="${#maps.containsKey(sample.characteristics,characteristic.key)}">
                    <div class="characteristic-mapping" th:each="value: ${sample.characteristics.get(characteristic.key)}">
                        <div class="characteristic-mapping-payload" th:text="${value}">{"foo":"bar"}</div>
                    </div>
                </td>
            </tr>
            <!-- end all characteristics -->

            <!-- update times metadata -->
            <tr>
                <td class="col_title"><b>Release Date :</b></td>
                <td th:text="${sample.releaseDate}"></td>
            </tr>
            <tr>
                <td class="col_title"><b>Last Updated :</b></td>
                <td th:text="${sample.updateDate}"></td>
            </tr>
            <tr>
                <td class="col_title"><b>Groups :</b></td>
                <td>
                    <!--<a href="../group/SAMEG39304"><id>SAMEG39304</id></a>-->
                </td>
            </tr>



            <tr>
                <td th:if="${!derivedFrom.isEmpty()}">
                    <b>Derived from: </b></td><td>
                <a th:each="item : ${derivedFrom}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
            </td>
            </tr>
            <!-- old try -->


            <!--
                            <tr>
                                <td th:if="!$#lists.isEmpty(derivedFrom)}">
                                    <b>Derived from: </b></td><td>
                                  <a th:each="item : ${relations.derivedFrom}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                            </td>
                            </tr>-->


                <tr>
                    <td th:if="!${derivedTo.isEmpty()}">
                        <b>Derived to: </b></td><td>
                    <a th:each="item : ${derivedTo}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                </td>
                </tr>

                <tr>
                    <td th:if="!${childOf.isEmpty()}">
                        <b>Children: </b></td><td>
                    <a th:each="item : ${childOf}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                </td>
                </tr>

                <tr>
                    <td th:if="!${sameAs.isEmpty()}">
                        <b>Same as: </b></td><td>
                    <a th:each="item : ${sameAs}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                </td>
                </tr>


                <tr>
                    <td th:if="!${curatedInto.isEmpty()}">
                        <b>Manually curated into: </b></td><td>
                    <a th:each="item : ${curatedInto }" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                </td>
                </tr>

                <tr>
                    <td th:if="!${curatedFrom.isEmpty()}">
                        <b>Manually curated from: </b></td><td>
                    <a th:each="item : ${curatedFrom}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                </td>
                </tr>


                <!-- RESTY legacy part, can be removed if Rest Template approach works
                <tr>
                    <td th:if="${derivedFrom!=null}">
                        <b>Derived from: </b></td><td>
                        <a th:each="item : ${derivedFrom}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>

                <tr>
                    <td th:if="${derivedTo!=null}">
                        <b>Derived to: </b></td><td>
                        <a th:each="item : ${derivedTo}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>

                <tr>
                    <td th:if="${childOf!=null}">
                        <b>Children: </b></td><td>
                        <a th:each="item : ${childOf}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>

                <tr>
                    <td th:if="${sameAs!=null}">
                        <b>Same as: </b></td><td>
                        <a th:each="item : ${sameAs}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>


                <tr>
                    <td th:if="${curatedInto!=null}">
                        <b>Manually curated into: </b></td><td>
                        <a th:each="item : ${curatedInto }" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>

                <tr>
                    <td th:if="${curatedFrom!=null}">
                        <b>Manually curated from: </b></td><td>
                        <a th:each="item : ${curatedFrom}" th:text="${item}" th:href="@{${item}}">Replaced Text </a>
                    </td>
                </tr>
                -->


            </tbody>
        </table>
    </div>
    <div id="samples">
        <br><br><hr><h4>Samples Relations</h4>
        <div id="ontology_vis">
        </div>
    </div>
</main>

<th:block layout:fragment="custom-endpage-scripts">
    <script th:src="@{/javascript/biosamples_sample_links.js}"></script>
</th:block>


<th:block layout:fragment="custom-endpage-scripts">
    <script th:src="@{/javascript/relationsVis.js}"></script>
</th:block>

</body>
</html>
