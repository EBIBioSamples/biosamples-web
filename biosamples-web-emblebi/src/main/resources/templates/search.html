<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      layout:decorator="__parent_base"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      th:with="currentPage = 'search', apiUrl = @{/api/search}, baseUrl = @{/}">
<head>

    <title>Search</title>
    <!--<link rel="stylesheet" href="stylesheets/main_samelf.css">-->
    <link rel="stylesheet" th:href="@{/stylesheets/main_samelf.css}" href="../static/stylesheets/main_samelf.css" type="text/css" media="screen"/>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>

    <style type="text/css">
        /* You have the option of setting a maximum width for your page, and making sure everything is centered */
        /* body { max-width: 1600px; margin: 0 auto; } */
    .node circle {
      fill: #000;
      opacity:0.8;
    }

    .node text {
    stroke:#333;
    cursos:pointer;
    }

    .node {
      font: 10px sans-serif;
    }
    .link {
      stroke: #aaa;
      stroke-width: 1.5px;
      opacity:.6;
    }
    .text-d3{
      border:solid;
      border-radius:10px;
      background-color:green;
      font-family:arial;
      font-size:10px;
    }
    .text-d3:hover{
        fill:black;
    }



    .axis {
      font: 10px sans-serif;
    }
    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
    .x.axis path {
      display: none;
    }

    .hull {
      fill: steelblue;
      stroke: steelblue;
      stroke-width: 32px;
      stroke-linejoin: round;
    }

    #vizSpotRelations{
        background-color: #ffffff;
    }

    #elementHelp{
        position:fixed;
        top:4%;
        right:2%;
        width:300px;
        text-align: center;
        background: grey;
        color:white;
        stroke: steelblue;
        stroke-width: 32px;
        border: 4px solid grey;
        visibility: hidden;
    }

    #infoPop{
        position:fixed;
        top:20%;
        right:30%;
        left:30%;
        width:40%;
        text-align: center;
        background: black;
        color:white;
        stroke: steelblue;
        stroke-width: 32px;
        border: 4px solid grey;
        display:none
    }

    ::-webkit-scrollbar {
      width: 9px;
      height: 9px;
    }
    ::-webkit-scrollbar-button {
      width: 31px;
      height: 31px;
    }
    ::-webkit-scrollbar-thumb {
      background: #009193;
      border: 0px solid #ffffff;
      border-radius: 7px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #ffffff;
    }
    ::-webkit-scrollbar-thumb:active {
      background: #009193;
    }
    ::-webkit-scrollbar-track {
      background: #a9a9a9;
      border: 72px none #ffffff;
      border-radius: 84px;
    }
    ::-webkit-scrollbar-track:hover {
      background: #5e5e5e;
    }
    ::-webkit-scrollbar-track:active {
      background: #c0c0c0;
    }
    ::-webkit-scrollbar-corner {
      background: transparent;
    }

    table {
        border: 4px solid grey;
    }

    </style>

    <!-- end CSS-->


    <!-- All JavaScript at the bottom, except for Modernizr / Respond.
         Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
         For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->

    <!-- Full build -->
    <!-- <script src="//www.ebi.ac.uk/web_guidelines/js/libs/modernizr.minified.2.1.6.js"></script> -->

    <!-- custom build (lacks most of the "advanced" HTML5 support -->
    <script src="//www.ebi.ac.uk/web_guidelines/js/libs/modernizr.custom.49274.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        window.apiUrl = [[${apiUrl}]];
        window.baseUrl = [[${baseUrl}]];
        /*]]>*/
    </script>
  <style type="text/css">
    /* You have the option of setting a maximum width for your page, and making sure everything is centered */
    /* body { max-width: 1600px; margin: 0 auto; } */
    .node circle {
      fill: #000;
      opacity:0.8;
    }
    .node text {
    stroke:#333;
    cursos:pointer;
    }
    .node {
      font: 10px sans-serif;
    }
    .link {
      stroke: #aaa;
      stroke-width: 1.5px;
      opacity:.6;
    }
    .text-d3{
      border:solid;  
      border-radius:10px;
      background-color:green;
      font-family:arial;
      font-size:10px;
    }
    .text-d3:hover{
        fill:black;
    }

    .axis {
      font: 10px sans-serif;
    }
    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
    .x.axis path {
      display: none;
    }    

    .hull {
      fill: steelblue;
      stroke: steelblue;
      stroke-width: 32px;
      stroke-linejoin: round;
    }

    #areaNodeLink{
      position:relative;
      width:100%;
    }

    #vizNodeLink{
        float: left;
        width:70%;
    }
    #infoVizRelations{
        float: left;
        width:30%;
        border:solid;
        border-color:black; 
        border-radius:4px;
        background-color: rgba(200, 200, 200, 0.5); 
        visibility: hidden;
        overflow:scroll;
        overflow-x:visible;
    }

    #vizSpotRelations{
        background-color: #ffffff;
    }

    #elementHelp{
        position:fixed; 
        top:4%; 
        right:2%;
        width:300px;
        text-align: center;
        background: grey;
        color:white;
        stroke: steelblue;
        stroke-width: 32px;
        border: 4px solid grey;
        visibility: hidden;
    }

    #infoPop{
        position:fixed; 
        top:20%; 
        right:30%;
        left:30%;
        width:40%;
        text-align: center;
        background: black;
        color:white;
        stroke: steelblue;
        stroke-width: 32px;
        border: 4px solid grey;
        display:none
    }

    ::-webkit-scrollbar {
      width: 15px;
      height: 15px;
    }
    ::-webkit-scrollbar-button {
      width: 31px;
      height: 31px;
    }
    ::-webkit-scrollbar-thumb {
      background: #000000;
      border: 6px solid #ffffff;
      border-radius: 7px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #3bcf88;
    }
    ::-webkit-scrollbar-thumb:active {
      background: #000000;
    }
    ::-webkit-scrollbar-track {
      background: #a9a9a9;
      border: 72px none #ffffff;
      border-radius: 84px;
    }
    ::-webkit-scrollbar-track:hover {
      background: #5e5e5e;
    }
    ::-webkit-scrollbar-track:active {
      background: #c0c0c0;
    }
    ::-webkit-scrollbar-corner {
      background: transparent;
    }

    table {
        border: 4px solid grey;
    }

  </style>  
  <!-- end CSS-->
</head>
<body id="app">


<body class="level2" id="app"><!-- add any of your classes or IDs -->

<div id="skip-to">
    <ul>
        <li><a href="#content">Skip to main content</a></li>
        <li><a href="#local-nav">Skip to local navigation</a></li>
        <li><a href="#global-nav">Skip to EBI global navigation menu</a></li>
        <li><a href="#global-nav-expanded">Skip to expanded EBI global navigation menu (includes all sub-sections)</a></li>
    </ul>
</div>

<div id="wrapper" class="container_24">
    <header>
        <div id="global-masthead" class="masthead grid_24">
            <!--This has to be one line and no newline characters-->
            <a href="//www.ebi.ac.uk/" title="Go to the EMBL-EBI homepage"><img src="//www.ebi.ac.uk/web_guidelines/images/logos/EMBL-EBI/EMBL_EBI_Logo_white.png" alt="EMBL European Bioinformatics Institute"/></a>

<div layout:fragment="content">


    <nav id="breadcrumb">
        <p>
            <a th:href="@{/}" href="/">BioSamples</a> &gt; <a th:href="@{/search}" href="../search">Search</a></span>
        </p>
    </nav>

    <!-- Example layout containers -->

    <section id="sectionTitle" >
        <h2>BioSample Database Search Interface</h2>
    </section>

  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#sectionList">List of results</a></li>
    <li><a data-toggle="tab" href="#sectionVisualisation">Visualisation</a></li>
  </ul>

    <div class="tab-content">
      <section id="sectionList" class="container tab-pane fade in active" v-show="queryTermPresent" v-cloak>

          <div v-if="!queryHasResults">
              <div class="row">
                  <h3>
                      No results have been found for <i>{{queryTerm}}</i>
                      <span class="small"><a href="#" v-on:click="querySamplesUsingFuzzy()">Try for similar terms?</a></span>
                  </h3>
              </div>
          </div>

          <div v-else="">
              <div class="row">
                  <div class="col-md-4"></div>
                  <div class="col-md-8"><h3>Search results for: <i>{{queryTerm}}<span v-if="useFuzzy" class="small"> (and related terms)</span></i></h3></div>
              </div>
              <div v-else="">
                  <div class="row">
                      <div class="col-md-4">
                          <div class="row">
                              <div class="panel panel-default">
                                  <div class="panel-heading">
                                      <h3>Refine search results</h3>
                                  </div>
                                  <div class="panel-body">
                                      <form>
                                          <label for="fuzzy-search">Search for similar terms</label>
                                          <input type="checkbox" id="fuzzy-search" name="fuzzy-search"
                                                 v-model="useFuzzy" v-on:change="querySamples" />
                                      </form>

                                      <component v-for="(key,facetObj) in facets"
                                                 is="facet" v-bind:title="key | startCase"
                                                 v-bind:keys="facetObj.keys"
                                                 v-bind:values="facetObj.vals"
                                                 v-bind:facet-id="key + 'Filter'">
                                      </component>
                                  </div>
                                  <div class="panel-footer">
                                      <div class="row">
                                          <div class="col-md-6">
                                              <component is="pagination"
                                                         v-bind:total-results="resultsNumber"
                                                         v-bind:displayed-results="samplesToRetrieve"
                                                         style="float:right">
                                              </component>
                                          </div>
                                          <div class="col-md-6">
                                              <component is="items-dropdown">
                                              </component>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-md-8">
                          <component is="biosamples-list"
                                     v-bind:elements="biosamples">
                          </component>
                      </div>
                  </div>
              </div>

          </div>
      </section>

      <section id="sectionVisualisation" class='tab-pane fade'>
          <div id="buttonRezInfo" style="border:solid;border-color:grey;  border-radius:1px;visibility:hidden;"> 
              <h4 id="titleRezInfo" >
                  Display result information
              </h4>
          </div>
          <div id="sectionVizResult" 
              style="visibility:hidden; height:0px;
               overflow: auto;" >
          </div>

          <div id="areaNodeLink">
            <div id= "vizNodeLink"></div>
            <div id="infoVizRelations">
              <h3> Clicked element information </h3>
                <div id="textData">Click on an element of the diagram to display its information </div>
            </div>
          </div>
      </section>

    </div>

    <div id="elementHelp"> Help </div>
    <div id="infoPop"> Temporary display of information </div>

<th:block layout:fragment="custom-endpage-scripts">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/history.js/1.8/bundled-uncompressed/html4+html5/native.history.js"></script>
    <script>

    </script>
    <script th:src="@{/javascript/searchComponents.js}"></script>
    <script th:src="@{/javascript/toolsFunctions.js}"></script>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>

</th:block>

</body>
</html>
