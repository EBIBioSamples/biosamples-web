<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">
<!--
    Configuration file for UrlRewriteFilter. See:
    http://www.tuckey.org/urlrewrite/
    http://localhost:8080/rewrite-status (only works when running locally)
-->
<urlrewrite>
    <rule>
        <name>Redirect to samples</name>
        <note>Redirect legacy /sample to new /samples</note>
        <from>^/sample/(.*)$</from>
        <to type="permanent-redirect">%{context-path}/samples/$1</to>
    </rule>
    <rule>
        <name>Redirect to groups</name>
        <note>Redirect legacy /group to new /groups</note>
        <from>^/group/(.*)$</from>
        <to type="permanent-redirect">%{context-path}/groups/$1</to>
    </rule>
    <rule>
        <name>Redirect to samples xml</name>
        <note>Redirect legacy xml/sample to new xml/samples</note>
        <from>^/xml/sample/(.*)$</from>
        <to type="permanent-redirect">%{context-path}/xml/samples/$1</to>
    </rule>
    <rule>
        <name>Redirect to groups xml</name>
        <note>Redirect legacy xml/group to new xml/groups</note>
        <from>^/xml/group/(.*)$</from>
        <to type="permanent-redirect">%{context-path}/xml/groups/$1</to>
    </rule>
        
    <rule>
        <name>Redirect bad query uri</name>
        <note>Redirect legacy xml/sample with poorly formatted URI to new well formed one. This strips URL encoding.</note>
        <from>^/xml/sample/query=(.*)$</from>
        <to type="permanent-redirect">%{context-path}/xml/samples?query=$1</to>
    </rule>
        
    <rule>
        <name>Redirect bad query uri</name>
        <note>Redirect legacy xml with poorly formatted URI to new well formed one. This strips URL encoding.</note>
        <from>^/xml/group/query=(.*)$</from>
        <to type="permanent-redirect">%{context-path}/xml/groups?query=$1</to>
    </rule>
    
    <rule>
        <note>Redirect legacy xml/v1.0/group to new xml/groups</note>
        <from>^/xml/v1.0/group/(.*)$</from>
        <to type="redirect">%{context-path}/xml/groups/$1</to>
    </rule>
    <rule>
        <note>Redirect legacy xml/v1.0/sample to new xml/samples</note>
        <from>^/xml/v1.0/sample/(.*)$</from>
        <to type="redirect">%{context-path}/xml/samples/$1</to>
    </rule>
    <rule>
        <note>Redirect legacy xml/v1.0/group to new xml/groups</note>
        <from>^/xml/v1.0/groups/(.*)$</from>
        <to type="redirect">%{context-path}/xml/groups/$1</to>
    </rule>
    <rule>
        <note>Redirect legacy xml/v1.0/sample to new xml/samples</note>
        <from>^/xml/v1.0/samples/(.*)$</from>
        <to type="redirect">%{context-path}/xml/samples/$1</to>
    </rule>
</urlrewrite>
